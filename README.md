# DBProject - שלב א

### חברי צוות פרויקט:
- נועם סולוב (214928517)
- אליעזר רוזנבלט (212311773)

### מערכת:
מערכת זו מנהלת נתונים הקשורים לחדר כושר, כולל ציוד, תחזוקה וספקים.

### יחידה נבחרת:
הפרויקט שלנו ממוקד בניהול וארגון ציוד חדר כושר, כולל סוגי ציוד, ספקים ונתוני תחזוקה.

---

## תוכן עניינים

1. [מבוא](#מבוא)
2. [תרשימי ERD ו-DSD](#תרשימי-erd-ו-dsd)
3. [החלטות עיצוב](#החלטות-עיצוב)
4. [שיטות הכנסת נתונים](#שיטות-הכנסת-נתונים)
    - [שיטה 1 - Mockaroo](#שיטה-1---mockaroo)
    - [שיטה 2 - Excel](#שיטה-2---excel)
    - [שיטה 3 - ChatGPT](#שיטה-3---chatgpt)
5. [גיבוי ושחזור](#גיבוי-ושחזור)
6. [אתגרים והתקנות](#אתגרים-והתקנות)

---

## מבוא

בפרויקט זה יצרנו מערכת לניהול ציוד חדר כושר, כולל נתונים על ספקים, תחזוקה וסוגי ציוד. המטרה העיקרית של המערכת היא לייעל את תהליך ניהול הציוד, התחזוקה והספקים בצורה מסודרת וממוקדת.

### יצירת הנתונים

כחלק מהפרויקט, נדרשנו להכניס נתונים לדוגמה למסד הנתונים. השתמשנו ב-3 שיטות שונות על מנת ליצור את הנתונים הדרושים:

1. **שימוש ב-Excel**: 
    - בעזרת Excel, יצרנו נתונים עבור חלק מהטבלאות, תוך שימוש בשיטות אוטומטיות כמו נוסחאות ופקודות אקראיות. הנתונים כללו את פרטי הציוד, הספקים, והכמויות.
    - לדוגמה: =TODAY()-RANDBETWEEN(1, 365) או =RANDBETWEEN(1, 1200)

2. **שימוש ב-Mockaroo**:
    - Mockaroo היא מערכת יצירת נתונים באופן אוטומטי, שבה השתמשנו כדי להפיק נתונים נוספים בצורה מהירה ומסודרת. השיטה הזו עזרה לנו להוסיף נתונים מסודרים, מהירים, ומשתנים באופן אוטומטי, במיוחד עבור טבלאות כמו ספקים וציוד.

3. **שימוש ב-ChatGPT**:
    - השתמשנו ב-ChatGPT, במיוחד לפיתוח קוד אוטומטי ליצירת פקודות SQL עבור הכנסת נתונים. שיטה זו הועילה במיוחד כאשר נדרשנו ליצור קשרים מורכבים בין טבלאות ולהכניס נתונים באופן דינמי ומדויק. כל הנתונים נוצרו בצורה אוטומטית ומסודרת כך שתהיה התאמה מלאה בין הטבלאות.

### אתגרים שנתקלנו בהם:

- **קביעת שדות תאריך**: הייתה לנו בעיה להמיר תאריכים לפורמט SQL הנכון, במיוחד כאשר הנתונים הגיעו במבני תאריך שונים (DD/MM/YYYY ו-MM/DD/YYYY). פתרנו את זה על ידי שימוש בפייתון להמיר את התאריכים לפורמט הנכון.
  
- **סנכרון נתונים בין טבלאות**: אחת הבעיות הייתה לוודא שיכניסו נתונים נכונים לכל טבלה עם קשרים נכונים בין טבלאות באמצעות מפתחות זרים. השתמשנו ב-ChatGPT ובסקריפטים כדי לפשט את יצירת הקשרים בצורה אוטומטית.

- **הגדרת מפתחות זרים**: עבור טבלאות כמו `Equipment_Supplier`, היינו צריכים לוודא שהספקים והציוד אכן מקשרים כראוי עם מפתחות זרים. השתמשנו בשיטות תכנות והפקות אוטומטיות כדי לוודא שאין כפילויות או טעויות בקשרים.

---

## תרשימי ERD ו-DSD

### תרשים ERD (Entity-Relationship Diagram)
התרשים **ERD** מציג את המבנה של בסיס הנתונים, כולל כל הישויות והקשרים ביניהם. התרשים כולל את הישויות הבאות:

- **Supplier** - טבלה לאחסון פרטי הספקים.
- **Equipment** - טבלה לאחסון פרטי הציוד.
- **Maintenance** - טבלה לניהול תחזוקה לציוד. תחזוקה נתפסת כישות חלשה המחוברת לציוד, והקשר שלה עם ציוד מוגדר על ידי מפתח זר.
- **StrengthEquipment, CardioEquipment, FlexibilityEquipment** - טבלאות המתארות את תתי-הישויות השונות של הציוד (כוח, אירובי, גמישות). לכל אחד מהסוגים יש את המאפיינים הייחודיים לו (למשל, ציוד כוח כולל משקלים מקסימליים ויכולת כוונון, ציוד אירובי כולל רמות נטייה ומסך מדידה לדופק).
- **Equipment_Supplier** - טבלה שמקשרת בין ציוד לספקים.

**החלטות עיצוב**:
- **הגדרת 3 סוגי מוצרים**: החלטנו להפריד את הציוד לשלוש קטגוריות נפרדות (Strength, Cardio, Flexibility) כדי להקל על אחסון המידע בצורה ממוקדת וייעודית. כל אחד מהסוגים מקבל תכונות שונות, כגון יכולת כוונון לציוד כוח, או רמות נטייה ודרישות מהירות לציוד אירובי.
  
- **תחזוקה כישות חלשה**: תחזוקה נחשבת לישות חלשה, והיא מקושרת לציוד בצורה של מפתח זר. המשמעות היא שתחזוקה לא יכולה להתקיים ללא ציוד, והקשר הזה חשוב לניהול המידע בצורה נכונה.

![image](https://github.com/user-attachments/assets/d278289c-19ab-49aa-a466-88f136f79e89)


### תרשים DSD (Data Schema Diagram)
התרשים **DSD** מציג את הסכמת בסיס הנתונים ואת הקשרים בין הטבלאות. הוא מתאר את המפתחות הזרים והמגבלות שהוגדרו בטבלאות.

**החלטות עיצוב**:
- **הגדרת מפתחות זרים**: עבור כל אחת מהטבלאות כמו `Equipment_Supplier` ו-`Maintenance`, הגדרנו מפתחות זרים לקישור בין טבלאות (כגון `equipment_id` ו`-supplier_id`). זה מאפשר לנו לשמור על שלמות המידע, במיוחד כשמדובר בקשרים בין הציוד לספקים ובין הציוד לתחזוקה.
- **מגבלות בקשרי מפתחות זרים**: הוספנו את המגבלה שהציוד לא יכול להיות מוזן אם הוא לא שייך לספק, ושלא ניתן לבצע תחזוקה ללא ציוד מקושר.

![image](https://github.com/user-attachments/assets/64148ae5-929b-478f-9921-875925913e96)


---

## החלטות עיצוב

- **נרמול**: כל הטבלאות עוצבו כך שיעמדו בסטנדרטים של **3NF** (Third Normal Form) כדי להבטיח מינימום של חזרה על נתונים ויעילות בניהול המידע.
- **שימוש במפתחות זרים**: טבלאות כמו `Equipment_Supplier` משתמשות במפתחות זרים כדי לאכוף את שלמות המידע בין טבלאות `Supplier` ו-`Equipment`.
- **שדות תאריך**: השדות `purchase_date` ו`warranty_expiry` שימשו לעקוב אחרי תאריכי הרכישה והערך המוגבל של הציוד.

---

## שיטות הכנסת נתונים

### שיטה 1 - Mockaroo
נעשה שימוש ב-**Mockaroo** ליצירת נתונים לדוגמה עבור טבלאות `strength Equipment` ו-`Equipment`. הנתונים הוזנו לתוך בסיס הנתונים באמצעות פקודות `INSERT` ב-SQL.

![Screenshot 2025-04-24 135905](https://github.com/user-attachments/assets/81ee1151-1a9f-4955-a86f-554491b0428d)


### שיטה 2 - Excel
נכתב Excel ליצירת פקוד` עבור טבלת `Equipment_Supplier`. שיטה זו נבחרה כי היא איפשרה גמישות רבה ביצירת קשרים בין הטבלאות.

![image](https://github.com/user-attachments/assets/4dbff346-54b9-42d6-9bf3-d949087c4aa5)


### שיטה 3 - ChatGPT
נעשה שימוש ב-**ChatGPT** ליצירת קוד אוטומטי המייצר נתונים ומבצע הכנסת נתונים למסד הנתונים.

![image](https://github.com/user-attachments/assets/1c2ff9a8-bd1c-43f8-89ae-b57a59800ec6)

---

## גיבוי ושחזור

### גיבוי
ביצענו גיבוי של בסיס הנתונים 
![image](https://github.com/user-attachments/assets/d6bcf9fe-81fa-459d-9db8-663ebafd5e29)


### שחזור
כדי לשחזר את בסיס הנתונים, השתמשנו בגיבוי:
![image](https://github.com/user-attachments/assets/5e42c087-1353-4954-ab72-45903741854d)

```bash
pg_restore -U nsolow -d mydatabase "C:/Users/noams/OneDrive/Desktop/databases/backup/backup_2025-04-24.sql"
